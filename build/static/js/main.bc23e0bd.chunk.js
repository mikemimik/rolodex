(this.webpackJsonprolodex=this.webpackJsonprolodex||[]).push([[0],{81:function(e,t,a){e.exports=a(93)},86:function(e,t,a){},93:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(8),c=a.n(o),s=(a(86),a(52)),i=a(24),l=a(11),u=a.n(l),h=a(57),p=a(23),m=a(14),d=a(15),g=a(17),b=a(16),f=a(18),E=a(71),v=a(39),j=a(12),O=function(e){localStorage.setItem("token",e)},y=function(){return localStorage.getItem("token")},C=a(4),x=a(150),k=a(135),w=a(136),I=a(122),N=a(126),S=a(127),F=a(128),P=a(129),T={cohorts:{view:{component:r.a.createElement(I.a,{key:"cohorts.view",label:"View Cohorts",value:"cohorts.view",icon:r.a.createElement(N.a,null)}),pathname:function(){return"/cohorts"}},create:{component:r.a.createElement(I.a,{key:"cohorts.create",label:"Add Cohort",value:"cohorts.create",icon:r.a.createElement(S.a,null)}),pathname:function(){return"/cohorts/create"}},edit:{component:r.a.createElement(I.a,{key:"cohorts.edit",label:"Edit Cohort",value:"cohorts.edit",icon:r.a.createElement(F.a,null)}),pathname:function(e){var t=e.cohortId;return"/cohorts/".concat(t,"/edit")}}},students:{view:{component:r.a.createElement(I.a,{key:"students.view",label:"View Students",value:"students.view",icon:r.a.createElement(P.a,null)}),pathname:function(e){var t=e.cohortId;return"/cohorts/".concat(t)}},create:{component:r.a.createElement(I.a,{key:"students.create",label:"Add Student",value:"students.create",icon:r.a.createElement(S.a,null)}),pathname:function(){return"/students/create"}},edit:{component:r.a.createElement(I.a,{key:"students.edit",label:"Edit Student",value:"students.edit",icon:r.a.createElement(F.a,null)}),pathname:function(e){var t=e.cohortId,a=e.studentId;return"/cohorts/".concat(t,"/students/").concat(a,"/edit")}}},projects:{create:{component:r.a.createElement(I.a,{key:"project.create",label:"Add Project",value:"projects.create",icon:r.a.createElement(S.a,null)}),pathname:function(){return"/projects/create"}}}};function B(e){return e.map((function(e){return Object(j.get)(T,"".concat(e,".component"))}))}function A(e,t,a){var n=this.props,r=n.history,o=n.match.params,c=Object(j.get)(T,"".concat(t,".pathname"))(o);return r.push({pathname:c,state:a})}var W=a(130),D=a(151),H=function(e){function t(){return Object(m.a)(this,t),Object(g.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.currentView,n=t.tabs,o=t.handleTabChange,c=t.appState;return r.a.createElement(W.a,{position:"static",color:"default"},r.a.createElement(D.a,{value:a,onChange:function(t,a){o.call(e,t,a,c)},indicatorColor:"primary",textColor:"primary",centered:!0},n))}}]),t}(n.PureComponent),M=a(131),U=a(73),V=a(49);function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var R=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(g.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(o)))).renderItemGrid=function(e){var t=a.props.classes;return r.a.createElement(M.a,{container:!0,className:t.grid},r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(M.a,{container:!0,justify:"center",spacing:16},e.map((function(e,t){return r.a.createElement(M.a,{key:t,item:!0},e)})))))},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.items,a=e.title,n=e.classes,o=e.children;return r.a.createElement("div",{className:n.root},r.a.createElement(U.a,{className:n.page},r.a.createElement(V.a,{variant:"h6",className:n.header},a),t&&this.renderItemGrid(t),o))}}]),t}(n.PureComponent),L=Object(C.a)((function(e){return{root:{paddingTop:2*e.spacing.unit},page:z({},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit}),grid:{flexGrow:1}}}))(R),J=["spring","summer","fall","winter"],q=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(g.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(o)))).state={nextCohort:{cohort:null,program:"",year:null}},a.submit=Object(p.a)(u.a.mark((function e(){var t,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=a.props.history,n=a.state.nextCohort,r=y(),e.next=6,fetch("/api/cohorts",{method:"POST",body:JSON.stringify(n),headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"}});case 6:return e.abrupt("return",t.push({pathname:"/cohorts"}));case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),a.handleInputChange=function(e){return function(t){var n=t.target,r=(n.id,n.value);console.groupEnd();var o=a.state.nextCohort,c=Object(i.a)({},e,r);a.setState({nextCohort:Object.assign({},o,c)})}},a.renderHeader=function(e){return r.a.createElement(H,Object.assign({currentView:"cohorts.create",handleTabChange:A,tabs:B(["cohorts.view","cohorts.create"])},e))},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(r.a.Fragment,null,this.renderHeader(this.props),r.a.createElement(L,{title:"Create Cohort"},r.a.createElement("form",{className:e.container},r.a.createElement(x.a,{fullWidth:!0,id:"program",label:"Program Name",className:e.textField,value:this.state.nextCohort.program,onChange:this.handleInputChange("program"),helperText:"Please enter program name"}),r.a.createElement(x.a,{fullWidth:!0,id:"year",label:"Cohort Year",className:e.textField,value:this.state.nextCohort.year,onChange:this.handleInputChange("year"),helperText:"Please enter cohort year"}),r.a.createElement(x.a,{select:!0,fullWidth:!0,id:"cohort",label:"Cohort Type",className:e.textField,value:this.state.nextCohort.cohort||J[0],onChange:this.handleInputChange("cohort"),SelectProps:{MenuProps:{className:e.menu}},helperText:"Please select a cohort",margin:"normal"},J.map((function(e){return r.a.createElement(k.a,{key:e,value:e},e)}))),r.a.createElement(w.a,{fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:this.submit},"Create Cohort"))))}}]),t}(n.PureComponent),G=Object(C.a)((function(e){return{root:{},container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit},menu:{width:200}}}))(q),Y=["spring","summer","fall","winter"],K=function(e){function t(e){var a;Object(m.a)(this,t),(a=Object(g.a)(this,Object(b.a)(t).call(this,e))).submit=Object(p.a)(u.a.mark((function e(){var t,n,r,o,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=a.props.history,n=a.state.cohort,r=y(),e.next=6,fetch("/api/cohorts/".concat(n._id),{method:"PUT",body:JSON.stringify(n),headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"}});case 6:return o=e.sent,e.next=9,o.json();case 9:return c=e.sent,console.log("cohorts:",c),e.next=13,a.props.onFetchCohorts(c.data);case 13:return e.abrupt("return",t.push({pathname:"/cohorts"}));case 16:e.prev=16,e.t0=e.catch(0),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])}))),a.handleInputChange=function(e){return function(t){var n=t.target,r=(n.id,n.value),o=a.state.cohort,c=Object(i.a)({},e,r);a.setState({cohort:Object.assign({},o,c)})}},a.renderHeader=function(e){return r.a.createElement(H,Object.assign({currentView:!1,handleTabChange:A,tabs:B(["cohorts.view"])},e))};var n=Object(j.get)(e,"location.state.cohort",{cohort:null,program:"",year:null});return a.state={cohort:n},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(r.a.Fragment,null,this.renderHeader(this.props),r.a.createElement(L,{title:"Edit Cohort"},r.a.createElement("form",{className:e.container},r.a.createElement(x.a,{fullWidth:!0,id:"program",label:"Program Name",className:e.textField,value:this.state.cohort.program,onChange:this.handleInputChange("program"),helperText:"Please enter program name"}),r.a.createElement(x.a,{fullWidth:!0,id:"year",label:"Cohort Year",className:e.textField,value:this.state.cohort.year,onChange:this.handleInputChange("year"),helperText:"Please enter cohort year"}),r.a.createElement(x.a,{select:!0,fullWidth:!0,id:"cohort",label:"Cohort Type",className:e.textField,value:this.state.cohort.cohort||Y[0],onChange:this.handleInputChange("cohort"),SelectProps:{MenuProps:{className:e.menu}},helperText:"Please select a cohort",margin:"normal"},Y.map((function(e){return r.a.createElement(k.a,{key:e,value:e},e)}))),r.a.createElement(w.a,{fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:this.submit},"Edit Cohort"))))}}]),t}(n.PureComponent),Q=Object(C.a)((function(e){return{root:{},container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit},menu:{width:200}}}))(K),X=a(134),Z=a(94),$=a(137),ee=a(138),te=a(140),ae=a(141),ne=a(142),re=a(139),oe=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(g.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(o)))).handleClickCohort=function(e){return a.props.history.push({pathname:"/cohorts/".concat(e)})},a.handleFetchCohorts=Object(p.a)(u.a.mark((function e(){var t,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=y(),e.next=4,fetch("/api/cohorts",{headers:{Authorization:"Bearer ".concat(t)}});case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,a.props.onFetchCohorts(r.data),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),a.renderHeader=function(e){return r.a.createElement(H,Object.assign({currentView:!1,handleTabChange:A,tabs:B(["cohorts.create"])},e))},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){console.group("Cohorts::componentDidMount"),this.handleFetchCohorts(),console.groupEnd()}},{key:"componentWillUnmount",value:function(){console.group("Cohorts::componentWillUnmount"),console.groupEnd()}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.cohorts;return r.a.createElement(r.a.Fragment,null,this.renderHeader(this.props),r.a.createElement(L,{title:"Cohorts"},r.a.createElement(X.a,null,n.map((function(t){return r.a.createElement(Z.a,{button:!0,key:"".concat(t.year,"-").concat(t.cohort,"-").concat(t.program)},r.a.createElement($.a,null,r.a.createElement(ee.a,null,r.a.createElement(re.a,null))),r.a.createElement(te.a,{disableTypography:!0,primary:r.a.createElement(V.a,{variant:"h4"},"".concat(t.program)),secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(V.a,{component:"span",className:a.inline},"".concat(t.year))," - ".concat(t.cohort)),onClick:function(a){e.handleClickCohort(t._id)}}),r.a.createElement(ae.a,null,r.a.createElement(ne.a,{className:a.margin,badgeContent:t.students.length,color:"secondary"},r.a.createElement(P.a,null))))})))))}}]),t}(n.PureComponent),ce=Object(C.a)((function(e){return{root:{},margin:{margin:2*e.spacing.unit},inline:{display:"inline"}}}))(oe),se=a(143),ie=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(g.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(o)))).handleClickStudent=function(){var e=Object(p.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.group("Cohort::handleClickStudent"),console.log("studentId:",t),console.groupEnd(),n=a.props.history,r=Object(j.get)(a.props,"match.params.cohortId"),e.abrupt("return",n.push({pathname:"/cohorts/".concat(r,"/students/").concat(t)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleFetchStudents=Object(p.a)(u.a.mark((function e(){var t,n,r,o,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.group("Cohort::handleFetchStudent"),e.prev=1,t=y(),n=Object(j.get)(a.props,"match.params.cohortId"),e.next=6,fetch("/api/cohorts/".concat(n,"/students"),{headers:{Authorization:"Bearer ".concat(t)}});case 6:return r=e.sent,e.next=9,r.json();case 9:o=e.sent,c=Object(j.get)(o,"data[0].students"),console.log("students:",c),a.props.onFetchStudents(n,c),console.groupEnd(),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(1),console.error(e.t0),console.groupEnd();case 20:case"end":return e.stop()}}),e,null,[[1,16]])}))),a.renderHeader=function(e){return r.a.createElement(H,Object.assign({currentView:!1,handleTabChange:A,appState:{cohort:a.props.cohortsById[Object(j.get)(a.props,"match.params.cohortId")]||{}},tabs:B(["cohorts.view","cohorts.edit","students.create"])},e))},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){console.group("Cohorts::componentDidMount"),this.handleFetchStudents(),console.groupEnd()}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.students;return r.a.createElement(r.a.Fragment,null,this.renderHeader(this.props),r.a.createElement(L,{title:"Cohort Students"},r.a.createElement(X.a,null,n.map((function(t){return r.a.createElement(Z.a,{button:!0,key:"".concat(t._id),onClick:function(a){e.handleClickStudent(t._id)}},r.a.createElement($.a,null,r.a.createElement(ee.a,null,r.a.createElement(P.a,null))),r.a.createElement(te.a,{disableTypography:!0,primary:r.a.createElement(V.a,{variant:"h4"},"".concat(t.firstName)),secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(V.a,{component:"span",className:a.inline},"".concat(t.firstName))," - ".concat(t.lastName))}),r.a.createElement(ae.a,null,r.a.createElement(ne.a,{className:a.margin,badgeContent:t.projects.length,color:"secondary"},r.a.createElement(se.a,null))))})))))}}]),t}(n.PureComponent),le=Object(C.a)((function(e){return{root:{},margin:{margin:2*e.spacing.unit},inline:{display:"inline"}}}))(ie),ue=function(e){function t(e){var a;Object(m.a)(this,t),(a=Object(g.a)(this,Object(b.a)(t).call(this,e))).submit=Object(p.a)(u.a.mark((function e(){var t,n,r,o,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=a.props.history,n=a.state.student,r=y(),o=Object(j.get)(a.props,"match.params.cohortId"),e.next=7,fetch("/api/students/".concat(n._id),{method:"PUT",body:JSON.stringify(n),headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"}});case 7:return c=e.sent,e.next=10,c.json();case 10:return s=e.sent,console.log("students:",s),e.next=14,a.props.onFetchStudents(o,s.data);case 14:return e.abrupt("return",t.push({pathname:"/cohorts/".concat(o)}));case 17:e.prev=17,e.t0=e.catch(0),console.error(e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])}))),a.handleInputChange=function(e){return function(t){var n=t.target,r=(n.id,n.value),o=a.state.student,c=Object(i.a)({},e,r);a.setState({student:Object.assign({},o,c)})}},a.renderHeader=function(e){return r.a.createElement(H,Object.assign({currentView:!1,handleTabChange:A,tabs:B(["students.view"])},e))};var n=Object(j.get)(e,"location.state.student",{firstName:"",lastName:""});return a.state={student:n},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(r.a.Fragment,null,this.renderHeader(this.props),r.a.createElement(L,{title:"Edit Student"},r.a.createElement("form",{className:e.container},r.a.createElement(x.a,{fullWidth:!0,id:"firstName",label:"First Name",className:e.textField,value:this.state.student.firstName,onChange:this.handleInputChange("firstName")}),r.a.createElement(x.a,{fullWidth:!0,id:"lastName",label:"Last Name",className:e.textField,value:this.state.student.lastName,onChange:this.handleInputChange("lastName")}),r.a.createElement(w.a,{fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Edit Cohort"))))}}]),t}(n.PureComponent),he=Object(C.a)((function(e){return{root:{},container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit},menu:{width:200}}}))(ue),pe=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(g.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(o)))).renderHeader=function(e){return r.a.createElement(H,Object.assign({currentView:!1,handleTabChange:A,appState:{student:a.props.studentsById[Object(j.get)(a.props,"match.params.studentId")]||{}},tabs:B(["students.view","students.edit","projects.create"])},e))},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(r.a.Fragment,null,this.renderHeader(this.props),r.a.createElement(L,{title:"Student",className:e.root},r.a.createElement("div",null)))}}]),t}(n.PureComponent),me=Object(C.a)((function(e){return{root:{}}}))(pe),de=a(155),ge=a(144),be=a(146),fe=a(133),Ee=a(154),ve=a(132),je=a(149),Oe=a(152),ye=a(145),Ce=a(147),xe=a(148),ke=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(g.a)(this,Object(b.a)(t).call(this,e))).submit=Object(p.a)(u.a.mark((function e(){var t,n,r,o,c,s,i,l,p,m,d,g;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=a.state,n=t.email,r=t.password,e.next=4,fetch("/api/users/login",{method:"POST",body:JSON.stringify({email:n,password:r}),headers:{"Content-Type":"application/json"}});case 4:if(o=e.sent,console.log("loginResponse:",o),c=o.ok,s=o.status,i=o.statusText,!c){e.next=18;break}return e.next=10,o.json();case 10:l=e.sent,p=l.data,m=Object(h.a)(p,1),d=m[0],g=d.token,O(g),a.props.fetchUser(),e.next=19;break;case 18:a.setState({error:{status:s,message:i}});case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),console.error("error:",e.t0);case 24:case"end":return e.stop()}}),e,null,[[0,21]])}))),a.handleClose=function(){a.setState({error:{}})},a.handleInputChange=function(e,t){a.setState(Object(i.a)({},e,t))},a.state={email:"",password:"",error:{}},a.debounceChange=Object(j.debounce)(a.handleInputChange,300),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){console.group("Login::componentDidMount"),console.groupEnd()}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state.error;return r.a.createElement("main",{className:t.main},r.a.createElement(U.a,{className:t.paper},r.a.createElement(de.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:!!Object.keys(a).length,onClose:this.handleClose,ContentProps:{"aria-describedby":"message-id"},autoHideDuration:6e3},r.a.createElement(ge.a,{className:t.snackError,"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:t.snackMessage},r.a.createElement(ye.a,{className:t.snackIcon}),a.message||""),action:[r.a.createElement(be.a,{key:"close","aria-label":"Close",color:"inherit",onClick:this.handleClose},r.a.createElement(Ce.a,{className:t.icon}))]})),r.a.createElement(ee.a,{className:t.avatar},r.a.createElement(xe.a,null)),r.a.createElement(V.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:t.form},r.a.createElement(fe.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(Ee.a,{htmlFor:"email"},"Email Address"),r.a.createElement(ve.a,{autoFocus:!0,id:"email",name:"email",type:"email",autoComplete:"email",onChange:function(t){var a=t.target,n=a.id,r=a.value;e.debounceChange(n,r)}})),r.a.createElement(fe.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(Ee.a,{htmlFor:"password"},"Password"),r.a.createElement(ve.a,{id:"password",name:"password",type:"password",autoComplete:"current-password",onChange:function(t){var a=t.target,n=a.id,r=a.value;e.debounceChange(n,r)}})),r.a.createElement(je.a,{control:r.a.createElement(Oe.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(w.a,{fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:this.submit},"Sign in"))))}}]),t}(n.PureComponent),we=Object(C.a)((function(e){return{root:{},main:Object(i.a)({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(400+3*e.spacing.unit*2),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:8*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px")},avatar:{margin:e.spacing.unit,backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:3*e.spacing.unit},snackError:{backgroundColor:e.palette.error.dark},snackIcon:{fontSize:20,opacity:.9,marginRight:e.spacing.unit},snackMessage:{display:"flex",alignItems:"center"}}}))(ke),Ie=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(g.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={user:null,cohorts:[],cohortsById:{},students:[],studentsById:{},studentsByCohortId:{}},a.fetchUser=Object(p.a)(u.a.mark((function e(){var t,n,r,o,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.group("App::fetchUser"),t=y(),console.log("localStorage::token:",t),console.groupEnd(),!t){e.next=20;break}return e.prev=5,e.next=8,fetch("/api/users/me",{headers:{Authorization:"Bearer ".concat(t)}});case 8:return n=e.sent,e.next=11,n.json();case 11:r=e.sent,o=r.data,c=Object(h.a)(o,1),s=c[0],a.setState({user:s}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(5),console.error("error:",e.t0);case 20:case"end":return e.stop()}}),e,null,[[5,17]])}))),a.onFetchCohorts=function(e){console.group("App::onFetchCohorts"),console.log("cohorts:",e);var t=e.reduce((function(e,t){var a=t._id;return Object.assign({},e,Object(i.a)({},a,t))}),{}),n=a.state.cohorts,r=Object(j.uniqBy)([].concat(Object(s.a)(e),Object(s.a)(n)),"_id"),o=a.state.cohortsById,c=Object.assign({},o,t);console.groupEnd(),a.setState({cohorts:r,cohortsById:c})},a.onFetchStudents=function(e,t){var n=t.reduce((function(e,t){var a=t._id;return Object.assign({},e,Object(i.a)({},a,t))}),{}),r=a.state.students,o=Object(j.uniqBy)([].concat(Object(s.a)(t),Object(s.a)(r)),"_id"),c=a.state.studentsById,l=Object.assign({},c,n),u=Object(i.a)({},e,t);a.setState({students:o,studentsById:l,studentsByCohortId:u})},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){console.group("App::componentDidMount"),this.fetchUser(),console.groupEnd()}},{key:"render",value:function(){var e=this;return r.a.createElement(E.a,null,r.a.createElement(v.d,null,r.a.createElement(v.b,{exact:!0,path:"/",render:function(t){return e.state.user?r.a.createElement(v.a,{to:"/cohorts"}):r.a.createElement(v.a,{to:"/login"})}}),r.a.createElement(v.b,{exact:!0,path:"/login",render:function(t){return e.state.user?r.a.createElement(v.a,{to:"/cohorts"}):r.a.createElement(we,{fetchUser:e.fetchUser})}}),r.a.createElement(v.b,{exact:!0,path:"/cohorts",render:function(t){return e.state.user?r.a.createElement(ce,Object.assign({},t,{cohorts:e.state.cohorts,onFetchCohorts:e.onFetchCohorts})):r.a.createElement(v.a,{to:"/login"})}}),r.a.createElement(v.b,{exact:!0,path:"/cohorts/create",render:function(t){return e.state.user?r.a.createElement(G,t):r.a.createElement(v.a,{to:"/login"})}}),r.a.createElement(v.b,{exact:!0,path:"/cohorts/:cohortId",render:function(t){var a=Object(j.get)(t,"match.params.cohortId"),n=e.state.studentsByCohortId[a]||[];return e.state.user?r.a.createElement(le,Object.assign({},t,{students:n,cohortsById:e.state.cohortsById,onFetchStudents:e.onFetchStudents})):r.a.createElement(v.a,{to:"/login"})}}),r.a.createElement(v.b,{exact:!0,path:"/cohorts/:cohortId/edit",render:function(t){return e.state.user?r.a.createElement(Q,Object.assign({},t,{onFetchCohorts:e.onFetchCohorts})):r.a.createElement(v.a,{to:"/login"})}}),r.a.createElement(v.b,{exact:!0,path:"/cohorts/:cohortId/students/:studentId/edit",render:function(t){return e.state.user?r.a.createElement(he,Object.assign({},t,{onFetchStudents:e.onFetchStudents})):r.a.createElement(v.a,{to:"/login"})}}),r.a.createElement(v.b,{exact:!0,path:"/cohorts/:cohortId/students/:studentId",render:function(t){var a=Object(j.get)(t,"match.params.studentId"),n=e.state.studentsById[a];return e.state.user?n?r.a.createElement(me,Object.assign({},t,{student:n,studentsById:e.state.studentsById})):r.a.createElement(v.a,{to:"/cohorts"}):r.a.createElement(v.a,{to:"/login"})}}),r.a.createElement(v.b,{render:function(){return r.a.createElement(v.a,{to:"/"})}})))}}]),t}(n.Component);c.a.render(r.a.createElement(Ie,null),document.getElementById("root"))}},[[81,1,2]]]);
//# sourceMappingURL=main.bc23e0bd.chunk.js.map